# コードレビューコメントの書き方

## 概要

-   優しくあれ。
-   理由を説明する。
-   明確な指示を出すと同時に、問題を指摘して開発者に判断を任せるバランスを取る。
-   複雑性を説明するだけでなく、開発者にコードを単純化するか、またはコードにコメントを追加するように勧める。

## 礼儀

一般に、レビュー対象の開発者に対して非常に明確かつ有用であると同時に、[礼儀正しく、尊重する](https://chromium.googlesource.com/chromium/src/+/master/docs/cr_respect.md)ことが重要です。これを実践する一つの方法は、*コード*に対するコメントを常に行い、*開発者*に対するコメントをしないようにすることです。例として：

悪い例: "明らかに並行処理から得られる利点がないのに、**あなたは**ここでスレッドをなぜ使ったのですか？"

良い例: "ここでの並行モデルは、私が見る限り実際の性能向上がないままシステムに複雑性を追加しています。性能向上がないため、このコードはシングルスレッドである方が良いです。"

## なぜ説明するか {#why}

上記の"良い"例で注目すべき点は、開発者がコメントの*理由*を理解する手助けをしていることです。レビューコメントにこの情報を常に含める必要はありませんが、場合によっては意図、守るべきベストプラクティス、または提案がコードの健全性をどのように向上させるのかについて、少し詳しく説明することが適切です。

## ガイダンスを提供する {#guidance}

**一般に、CL（変更リスト）を修正する責任は開発者にあり、レビュアーにはありません。** 詳細なソリューションの設計や開発者のためのコードを書く必要はありません。

しかし、これはレビュアーが役立たずであるべきだという意味ではありません。一般に、問題を指摘すると直接的なガイダンスを提供するのと適切なバランスを取るべきです。問題を指摘して開発者に判断を任せることが、しばしば開発者が学び、コードレビューが容易になります。また、開発者がレビュアーよりもコードに詳しいため、より良いソリューションが生まれる可能性もあります。

## コメントの重要度をラベルする {#label-comment-severity}

コメントの重要度にラベルを付けることを検討してください。必須の変更とガイドラインや提案を区別します。

いくつかの例：

> Nit（些細な点）: これは小さなことです。技術的には行うべきですが、大きな影響はありません。
>
> Optional（または Consider）: これは良い考えかもしれませんが、厳密には必須ではありません。
>
> FYI: このCLでこれを行うことは期待していませんが、将来的に考慮するのが興味深いかもしれません。

この方法でレビューの意図が明確になり、著者は各コメントの重要度を優先順位付けするのに役立ちます。また、コメントのラベルがない場合、著者はすべてのコメントが必須であると解釈する可能性があり、それが単に情報提供やオプションである場合もあります。

## 説明を受け入れる {#explanations}

コードの一部を理解できないと開発者に説明を求めた場合、通常、それは開発者が**コードをより明確に書き直す**結果となるべきです。場合によっては、コードにコメントを追加するのも適切な対応ですが、それが過度に複雑なコードを単に説明しているだけでない場合に限ります。

**コードレビューツール内でのみ書かれた説明は、将来のコードの読者にとって有用ではありません。** それは、コードの通常の読者が既に知っている何かを開発者が説明するときなど、限られた状況でのみ許容されます。

次に進む: [コードレビューでの反発の取り扱い](pushback.md)
