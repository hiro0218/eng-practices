# コードレビューの速度

## なぜコードレビューは速くなければならないか？ {#why}

**Googleでは、個々の開発者がコードを書く速度よりも、開発者チーム全体が製品を生産する速度を最適化しています。** 個々の開発速度も重要ですが、チーム全体の速度が*より*重要です。

コードレビューが遅いと、いくつかの問題が発生します：

* **チーム全体の速度が低下します。** はい、レビューにすぐに対応しない個々の開発者は他の作業を進めます。しかし、レビューと再レビューを待っている間に、チーム全体の新機能やバグ修正が日、週、または月単位で遅れます。
* **開発者がコードレビュープロセスに抗議を始めます。** レビュアーが数日ごとにしか反応せず、その都度CLに大きな変更を要求すると、開発者にとっては挫折することがあります。これはしばしば「レビュアーが厳しすぎる」という苦情として表れます。しかし、レビュアーが開発者がアップデートするたびに*迅速に*反応すると、苦情は消える傾向があります。**コードレビュープロセスに対するほとんどの苦情は、実際にはプロセスを速くすることで解決されます。**
* **コードの健全性に影響を与える可能性があります。** レビューが遅いと、開発者が最善でないCLを提出する圧力が高まります。遅いレビューは、コードのクリーンアップ、リファクタリング、既存のCLへのさらなる改善も阻害します。

## コードレビューはどれくらい速くすべきか？ {#fast}

集中してタスクを行っていない場合、**コードレビューはその後すぐに行うべきです。**

**ビジネスデーで最大でも反応するべき時間は一日です**（つまり、翌朝の最初のこと）。

このガイドラインに従うと、典型的なCLは1日以内に複数回のレビュー（必要な場合）を受けることになります。

## 速度対中断 {#interruption}

個々の速度がチーム速度よりも優先される唯一の時期があります。**コードを書くなどの集中したタスクの最中であれば、自分自身を中断してコードレビューを行わないでください。**
研究によれば、中断された後に開発者がスムーズな開発の流れに戻るのには時間がかかることが示されています。したがって、コーディング中に自分自身を中断することは、他の開発者が少しコードレビューを待つよりも、実際にはチームにとって*より*コストがかかります。

代わりに、作業の中断点が来たときにレビューのリクエストに対応してください。これは、現在のコーディングタスクが完了した後、ランチ後、会議から戻った後、休憩室から戻った後など、あなたの作業で合理的な中断点が来たときです。

## 迅速な反応 {#responses}

コードレビューの速度について話すとき、私たちが気にしているのは*反応時間*であり、CLが全体のレビューを経て提出されるまでにかかる時間ではありません。全体のプロセスも理想的には速くあるべきですが、**個々の反応が迅速に来ることの方が、全体のプロセスが速く進むことよりも重要です。**

全体のレビュー*プロセス*が時々長くかかる場合でも、プロセス全体でレビュアーから迅速な反応があると、「遅い」コードレビューに対する開発者の挫折感が大幅に軽減されます。

CLが来たときに完全なレビューを行う時間がない場合でも、開発者に対していつそれに取り組むかを知らせる迅速な反応を送ることができます、より迅速に反応できる他のレビュアーを提案する、または[初期の広範なコメントを提供する](navigate.md)ことができます。（注：これによってコーディングを中断する必要はありません。作業の合理的な中断点でこのような反応を送ってください。）

**レビュアーが「LGTM」と言う際には、「このコードは[私たちの基準](standard.md)を満たしている」と確信している時間を十分に費やすことが重要です。** ただし、個々の反応は理想的には[速く](#fast)あるべきです。

## タイムゾーンをまたぐレビュー {#tz}

タイムゾーンの違いに対処する際には、著者がその日の仕事を終える前に返信するように努力してください。もし彼らがすでにその日の仕事を終えている場合、次の日の仕事が始まる前にレビューが完了するように努力してください。

## コメント付きLGTM {#lgtm-with-comments}

コードレビューを速く進めるために、レビュアーが解決されていないコメントを残しながらもLGTM/Approvalを与えるべき状況があります。これは次のいずれかに該当する場合です：

* レビュアーが、開発者がレビュアーの残りのコメントすべてに適切に対応すると確信している。
* 残りの変更が小さいものであり、開発者によって*行わなくてもよい*。

レビュアーは、これらのオプションのいずれを意図しているのかを明示するべきです、それが他に明らかでない場合。

コメント付きLGTMは、特に開発者とレビュアーが異なるタイムゾーンにいる場合、開発者が「LGTM、Approval」を得るために1日待たされることがないようにするために特に検討する価値があります。

## 大きなCL {#large}

誰かがあなたにレビューを行う時間がいつになるかわからないほど大きなコードレビューを送ってきた場合、通常の反応は、開発者に[CLをいくつかの小さなCLに分割する](../developer/small-cls.md)ように頼むことです。これは通常、可能でありレビュアーにとって非常に有用です、開発者から追加の作業が必要であっても。

CLが*小さなCLに分割できない*場合、そしてあなたがその全体を迅速にレビューする時間がない場合、少なくともCL全体の設計についていくつかのコメントを書いて、それを開発者に改善のために送り返してください。レビュアーとしてのあなたの目標の1つは、開発者を常にブロック解除するか、何らかの形で迅速にさらなるアクションを取ることを可能にすることであるべきです、それを行うためにコードの健全性を犠牲にすることなく。

## 時間とともにコードレビューが改善される {#time}

これらのガイドラインに従い、コードレビューで厳格であれば、コードレビュープロセス全体が時間とともにますます速くなる傾向があるはずです。開発者は健全なコードに必要なことを学び、最初から素晴らしいCLを送り、レビュー時間がますます少なくなります。レビュアーは迅速に反応し、レビュープロセスに不必要な遅延を加えないように学びます。
ただし、**速度の想像上の改善のために[コードレビュー基準](standard.md)や品質を妥協してはいけません**—長期的には実際に何も速く進むわけではありません。

## 緊急事態

また、CLが*全体の*レビュープロセスを非常に迅速に通過しなければならない、そして品質ガイドラインが緩和される[緊急事態](../emergencies.md)もあります。ただし、どの状況が実際に緊急事態として適格であり、どの状況がそうでないかの説明については、[何が緊急事態か？](../emergencies.md#what)を参照してください。

次へ：[コードレビューコメントの書き方](comments.md)
