# コードレビューの基準

コードレビューの主要な目的は、Googleのコードベース全体のコード健全性が時間とともに向上していくことを確認することです。コードレビューの全てのツールとプロセスは、この目的に沿って設計されています。

この目的を達成するためには、いくつかのトレードオフをバランスよく取る必要があります。

まず第一に、開発者は自分のタスクで**進捗**を出すことができなければなりません。コードベースに改善を加えない限り、コードベースは決して改善されません。また、レビュアーが**いかなる**変更も困難にする場合、開発者は今後改善を加える意欲を失います。

一方で、レビュアーの責務は、各CLが時間とともにコードベース全体のコード健全性が低下しないような品質であることを確認することです。これは難しい場合があります。特に、チームが大きな時間制約下にあると、目標を達成するために手短かな手法を取らざるを得ないと感じると、コードベースは時間とともに少しずつコード健全性が低下する傾向があります。

さらに、レビュアーはレビューしているコードに対する所有権と責任を持っています。彼らはコードベースが一貫性を持ち、保守可能であるとともに、[「コードレビューで何を探すべきか」](looking-for.md)で述べられているその他の事項を確保したいと考えています。

したがって、コードレビューで期待される基準として以下のルールがあります：

**一般的に、レビュアーはCLが完璧でなくても、作業中のシステムの全体的なコード健全性を確実に向上させる状態になったら、承認するべきです。**

これがコードレビューガイドラインの中での**最優先の原則**です。

もちろんこれには制限があります。例えば、CLがレビュアーがそのシステムで望んでいない機能を追加する場合、そのコードがよく設計されていてもレビュアーは承認を拒否することが確かにあります。

ここでの重要な点は、「完璧な」コードというものは存在しないということです。存在するのは**より良い**コードだけです。レビュアーは、承認を与える前にCLの各小さな部分を磨き上げるように著者に要求するべきではありません。むしろ、レビュアーは進捗を出す必要性と、提案されている変更の重要性とをバランスよく取るべきです。完璧を求めるのではなく、レビュアーが求めるべきは**継続的な改善**です。全体として、システムの保守性、可読性、理解可能性を向上させるCLは、「完璧」でないからといって何日も何週間も遅延させるべきではありません。

レビュアーは**常に**、何かがより良くできるというコメントを自由に残すべきですが、それがそれほど重要でない場合は、

それを著者に知らせるために「Nit: 」のような接頭語をつけるべきです。

注意：この文書のどの部分も、システムの全体的なコード健全性を確実に**悪化させる**CLをチェックインする理由を正当化するものではありません。それをする唯一の時期は、[緊急事態](../emergencies.md)が発生した場合です。

## メンタリング

コードレビューは、開発者に新しい言語、フレームワーク、または一般的なソフトウェア設計の原則について何か新しいことを教える重要な機能を果たすことがあります。新しいことを学ぶ手助けとなるコメントを残すのは常に構いません。知識を共有することは、時間とともにシステムのコード健全性を向上させる一部です。ただし、コメントが純粋に教育的であり、この文書で述べられている基準を満たすためには必須ではない場合、それは「Nit: 」で始めるか、著者がこのCLでそれを解決する必要はないということを何らかの形で示すべきです。

## 原則 {#principles}

*   技術的な事実とデータは意見と個人の好みに優先します。

*   スタイルに関する問題については、[スタイルガイド](http://google.github.io/styleguide/)が絶対的な権威です。スタイルガイドにない純粋なスタイルのポイント（空白など）は個人の好みの問題です。スタイルはそこにあるものと一致しているべきです。以前のスタイルがない場合は、著者のものを受け入れます。

*   **ソフトウェア設計の側面はほとんど決して純粋なスタイルの問題や単なる個人の好みではありません。**それらは基礎となる原則に基づいており、それらの原則に基づいて評価されるべきです。時々、いくつかの有効なオプションがあります。著者が（データまたは堅牢なエンジニアリングの原則に基づいて）いくつかのアプローチが等しく有効であると示すことができれば、レビュアーは著者の好みを受け入れるべきです。それ以外の場合、選択はソフトウェア設計の標準原則によって指示されます。

*   他のルールが適用されない場合、レビュアーは著者に、現在のコードベースと一致するように要求することができます。ただし、それがシステムの全体的なコード健全性を悪化させない限りです。

## 意見の対立の解決 {#conflicts}

コードレビューにおいて何らかの意見の対立が発生した場合、最初のステップは常に、開発者とレビュアーがこの文書と[CL著者のガイド](../developer/index.md)およびこの[レビュアーガイド](index.md)の他の文書に基づいて合意に達することを試みることです。

合意に達することが特に困難な場合、レビュアーと著者の間で対面の会議やビデオ会議を持つことで、コードレビューコメントを通じて意見の対立を解決しようとするだけではなく、助けとなることがあります。（これを行う場合は、将来の読者のために、CLへのコメントとして議論の結果を記録してください。）

それが状況を解決しない場合、最も一般的な解決策はエスカレーションです。よくあるエスカレーションの経路は、より広いチームの議論、テクニカルリードに意見を求める、コードのメンテナーに決定を求める、またはEngマネージャーに助けを求めることです。**著者とレビュアーが合意に達することができないためにCLが放置されることはありません。**

次へ：[コードレビューで何を探すべきか](looking-for.md)